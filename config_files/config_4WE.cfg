%----------------------------------------------------------------------------------------------------------------------
% This file is the configuration file for K600 data. It should take the form of the global definitions at the top:
% ADCModules
% TDCModules
% NumberOfMMM/W1s
% Then, after that lot, the channel definitions for each detector which should be in the form:
% MMMADCChannels
% 1	FirstChannel	LastChannel
% 2	FirstChannel	LastChannel
% n	FirstChannel	LastChannel
% MMMADCChannels

% This should be repeated for all detectors (any detector not defined like this will be ignored.
% Then:
% MMMTDCChannels
% 1	FirstChannel	LastChannel etc.
%
% This should be repeated for all types of detector in the system. If a new type of ancillary detector system is added, 
% the person doing that needs to add the information about how the configuration file should be read in in ReadConfiguration 
% in Parameters.c
%----------------------------------------------------------------------------------------------------------------------


ADCModules	0

TDCModules	7

NumberOfMMM	0

% MMMADCChannels
%1	pside	0	15
%1	nside	80	87
%2	pside	16	31
%2	nside	88	95
%3	pside	32	47
%3	nside	96	103
%4	pside	48	63
%4	nside	104	111
%5	pside	64	79
%5	nside	112	119
%MMMADCChannels

%MMMTDCChannels
%1	pside	880	895
%1	nside	656	663
%2	pside	864	879
%2	nside	664	671
%3	pside	848	863
%3	nside	816	823
%4	pside	832	847
%4	nside	824	831
%5	pside	704	719
%5	nside	912	919
%MMMTDCChannels

NumberOfW1	0

W1ADCChannels
1	pside	0	15
1	nside	32	47
2	pside	16	31
2 	nside	48	63
W1ADCChannels

W1TDCChannels
1	pside	832	847
1	nside	816	831
2	pside	848	863
2	nside	864	879
W1TDCChannels

%----------------------------------------------------------------------------------------------------------------------
%                If Hagar is present, next line should read 'yes' otherwise it should read 'no'
%----------------------------------------------------------------------------------------------------------------------

HagarUsed no

%HagarADCChannels
%96	103
%HagarADCChannels

%HagarTDCChannels
%688	695
%HagarTDCChannels

%----------------------------------------------------------------------------------------------------------------------
%                If CLovers are present, next line should read 'yes' otherwise it should read 'no'
%----------------------------------------------------------------------------------------------------------------------
CloverUsed no

%NumberOfClover 8

%CloverADCChannels
%1 0 3
%2 4 7
%3 8 11
%4 12 15
%5 16 19
%6 20 23
%7 24 27
%8 28 31
%CloverADCChannels

%CloverTDCChannels
%1 864 867
%2 868 871
%3 872 875
%4 876 879
%5 880 883
%6 884 887
%7 888 891
%8 892 895
%CloverTDCChannels

%----------------------------------------------------------------------------------------------------------------------
%                If other scintillators are present, next line should read 'yes' otherwise it should read 'no'
%----------------------------------------------------------------------------------------------------------------------
ScintillatorUsed no

%NumberOfScintillator 4

%ScintillatorADCChannels
%1 32
%2 33
%3 48
%4 49
%ScintillatorADCChannels

%ScintillatorTDCChannels
%1 816	
%2 817
%3 816
%4 817
%ScintillatorTDCChannels


%----------------------------------------------------------------
% 	VDC related issues
%----------------------------------------------------------------

% VDC is either old, new or newux
VDC1 new
VDC2 new 

VDCSeparationDistanceZ 285
VDCSeparationDistanceX 515



%%manually tweaked
%ThFPSCATOffsetTerms 3
%0 1
%1 35.8137
%2 -0.0053
%EndThFPSCATOffsetTerms
%
%ThFPSCATSlopeTerms 3
%0 1
%1 -1.0874
%2 1.7844E-5
%EndThFPSCATSlopeTerms


%using X1X2
ThFPSCATOffsetTerms 3
0 1
1 26.4300792436832
2 -0.002622102644972086
EndThFPSCATOffsetTerms

ThFPSCATSlopeTerms 3
0 1
1 -0.779838449871659
2 -5.4243504805521686e-05
EndThFPSCATSlopeTerms




% ignore parameters below!!
% use this when plotting ttre X1pos+((1.061337)*(X1pos**0)*(thetaSCAT**1) + (2.093203)*(X1pos**0)*(thetaSCAT**2) + (-1Index:1)*(X1pos**0)*(thetaSCAT**3) + (-0.274081)*(X1pos**0)*(thetaSCAT**4) + (0.392383)*(X1pos**0)*(thetaPeak pos range:620 660*(X1pos**1)*(thetaSCAT**1) + (-0.004362)*(X1pos**1)*(thetaSCAT**2) + (0.002317)*(X1root_26Mg/sorted00 .root (0.000764)*(X1pos**1)*(thetaSCAT**4) + (-0.000776)*(X1pos**1)*(thetaSCAT**5))

%signes from fit might have to be turned around
% the first term of the ThSCATCorrectionTerm is always 1, it plays no role in the correction

%%best 4WE for 26Mg
%LineshapeCorrectionTerms 21
%0 0 1 -0.176321813378
%1 0 2 -0.0432742137723
%2 0 3 2.69840174139
%3 0 4 -0.563511001999
%4 0 5 -1.27252478345
%5 0 6 0.102608007092
%6 0 7 0.108606803181
%7 1 1 0.0102895879958
%8 1 2 0.00186668412394
%9 1 3 -0.0108261682018
%10 1 4 0.00255133395765
%11 1 5 0.00513480276283
%12 1 6 -0.00054136348803
%13 1 7 -0.000506294750277
%14 2 1 -8.38104095074e-06
%15 2 2 -5.16069148925e-06
%16 2 3 9.93700174814e-06
%17 2 4 -1.11979093154e-06
%18 2 5 -4.58682445845e-06
%19 2 6 3.81831556012e-07
%20 2 7 4.60594551369e-07
%EndLineshapeCorrectionTerms
%
%
%%12C
%LineshapeCorrectionTerms 21
%0  0 1 0.5531190380417705
%1  0 2 0.047963009589926026
%2  0 3 2.6985475640986207
%3  0 4 -0.563511001999
%4  0 5 -1.27252478345
%5  0 6 0.102608007092
%6  0 7 0.108606803181
%7  1 1 0.010352322503978382
%8  1 2 0.0018735439948145017
%9  1 3 -0.010826919435472223
%10 1 4 0.00255133395765
%11 1 5 0.00513480276283
%12 1 6 -0.00054136348803
%13 1 7 -0.000506294750277
%14 2 1 -8.38104095074e-06
%15 2 2 -5.16069148925e-06
%16 2 3 9.93700174814e-06
%17 2 4 -1.11979093154e-06
%18 2 5 -4.58682445845e-06
%19 2 6 3.81831556012e-07
%20 2 7 4.60594551369e-07
%EndLineshapeCorrectionTerms
%
%%12Nt
%LineshapeCorrectionTerms 21
%0  0 1 0.5508855195339077
%1  0 2 0.04778483802284922
%2  0 3 2.6985866951356767
%3  0 4 -0.563511001999
%4  0 5 -1.27252478345
%5  0 6 0.102608007092
%6  0 7 0.108606803181
%7  1 1 0.010352348178346215
%8  1 2 0.0018736007484771232
%9  1 3 -0.010826895577979414
%10 1 4 0.00255133395765
%11 1 5 0.00513480276283
%12 1 6 -0.00054136348803
%13 1 7 -0.000506294750277
%14 2 1 -8.38104095074e-06
%15 2 2 -5.16069148925e-06
%16 2 3 9.93700174814e-06
%17 2 4 -1.11979093154e-06
%18 2 5 -4.58682445845e-06
%19 2 6 3.81831556012e-07
%20 2 7 4.60594551369e-07
%EndLineshapeCorrectionTerms
%
%%45Sc
%LineshapeCorrectionTerms 21
%0  0 1 -0.43910232348302736
%1  0 2 -0.07620340785735545
%2  0 3 2.6981993053594255
%3  0 4 -0.563511001999
%4  0 5 -1.27252478345
%5  0 6 0.102608007092
%6  0 7 0.108606803181
%7  1 1 0.010264755016384597
%8  1 2 0.0018639409584288056
%9  1 3 -0.010825611517374167
%10 1 4 0.00255133395765
%11 1 5 0.00513480276283
%12 1 6 -0.00054136348803
%13 1 7 -0.000506294750277
%14 2 1 -8.38104095074e-06
%15 2 2 -5.16069148925e-06
%16 2 3 9.93700174814e-06
%17 2 4 -1.11979093154e-06
%18 2 5 -4.58682445845e-06
%19 2 6 3.81831556012e-07
%20 2 7 4.60594551369e-07
%EndLineshapeCorrectionTerms

%64Zn
LineshapeCorrectionTerms 21
0  0 1 -0.5460735068105353
1  0 2 -0.0894753637560271
2  0 3 2.6981999915963746
3  0 4 -0.563511001999
4  0 5 -1.27252478345
5  0 6 0.102608007092
6  0 7 0.108606803181
7  1 1 0.010254899673634915
8  1 2 0.0018625281281934556
9  1 3 -0.010825525683905544
10 1 4 0.00255133395765
11 1 5 0.00513480276283
12 1 6 -0.00054136348803
13 1 7 -0.000506294750277
14 2 1 -8.38104095074e-06
15 2 2 -5.16069148925e-06
16 2 3 9.93700174814e-06
17 2 4 -1.11979093154e-06
18 2 5 -4.58682445845e-06
19 2 6 3.81831556012e-07
20 2 7 4.60594551369e-07
EndLineshapeCorrectionTerms

ThSCATCorrectionTerms 6
0 1
1 0
2 0
3 0
4 0
5 0
EndThSCATCorrectionTerms



%Retiefs initial values
%0 1
%1 -0.1325419
%2 -0.158377
%3 +0.0768629
%4 +0.03
%5 +0.01


% Correction of the form ((ThSCAT)^n)*(X)^n
ThSCATXCorrectionTerms 3
0 1
1 +0
2 +0
EndThSCATXCorrectionTerms

% Correction of the form ((ThSCAT)^n)*(X-XLineshapeOffset)
% Note: The number of CorrectionTerms is for the Parameters excluding XLineshapeOffset
ThSCATXLoffCorrectionTerms 3
XLineshapeOffset 651.4
0 1
1 +0
2 0.0
EndThSCATXLoffCorrectionTerms

Y1CorrectionTerms 3
0 1
1 +0.0
2 +0.0
EndY1CorrectionTerms

% Correction of the form ((TOF-TOFoffset)^n)
% This correction is normally used in the absence of a 2nd VDC, when 
% reliable angle info is not available. So only Y and TOF corrections then to be used.
% Note: The number of CorrectionTerms is for the Parameters excluding TOFLineshapeOffset
TOFCorrectionTerms 3
TOFLineshapeOffset 1950
0 1
1 -0.1
2 -0.001
EndTOFCorrectionTerms

%--------------------------------------------------------------------------------------------------------------
% If, like me, you do a momentum/rigidity calibration of the focal plane, you need to put in your calibration 
% in the section below - Brho comes from a quadratic fit of the focal plane currently but you can use higher 
% or lower-order polynomials by changing the number after RigidityCalibration
%--------------------------------------------------------------------------------------------------------------


%old results:
%RigidityCalibration 3
%0	1.99876e+03
%1	2.14050e-01
%2	-2.28572e-05
%EndRigidityCalibration


%best results:
RigidityCalibration 3
0	1.99878e+03
1	2.01412e-01
2	-9.97255e-06
EndRigidityCalibration




%----------------------------------------------------------------
% 	Kinematics related issues
%----------------------------------------------------------------

% BeamEnergy given in MeV

BeamEnergy 200 


InelasticScattering true

ScatteringAngle 4

% nuclei rest masses in MeV:


% p
mass1 938.27207

% 26Mg
mass2 24196.500

% 64Zn
%mass2 59534.288

%45Sc
%mass2 41865.431

%12C
%mass2 11174.863

%14N
%mass2 13040.204

%24Mg, using atomic mass, subtracting electron mass, multiply with MeV/u
%23.985041697 - 12*5.48579909070e-4   = 2.39784587380911596e+01
%931.4940954*(23.985041697 - 12*5.48579909070e-4)   = 2.23357927313244509e+04

%4He
%4.00260325413  - 2*5.48579909070e-4  =  4.00150609431186055e+00
%931.4940954*(4.00260325413  - 2*5.48579909070e-4)  =  3.72737929955861364e+03

%p
%931.4940954 (1.00782503224- 5.48579909070e-4) = 938.27207

%26Mg
%931.4940954 *(25 982592971- 12*5.48579909070e-4) = 24196.500

%64Zn
%931.4940954 *( 63.929141772- 30*5.48579909070e-4) = 59534.288

%45Sc
%931.4940954 *(44.955907503- 21*5.48579909070e-4) = 41865.431

%12C
%931.4940954 *(12 - 6*5.48579909070e-4) = 11174.863

%14N
%931.4940954 *(14 003074.00446 - 6*5.48579909070e-4) = 13040.204

% masses 3 and 4 only need to be defined for reactions that are not inelastic scattering
% mass3
% mass4 

%----------------------------------------------------------------------------------------------------------------------
% File for calibration stuff - should be of the form: channel number_of_parameters(N) par_0 par_1 par_2... where E = sum-i_0^N(par_i * pow(adc,i));
% Now, if the calibration should not be set, change the file name to 'ignore'
% The calibration file should terminate with a line reading 'eof'
% Be careful! The calibration file can currently not be allowed to miss any numbers, otherwise things will go terribly wrong!
%----------------------------------------------------------------------------------------------------------------------
CalibrationFile        ignore

%CalibrationFile	/vicepda/althome/k600user/PR254/calibration/CalibParsPR254Run63Mod.dat

%CalibrationFile	calib_12MeVgain.dat
%CalibrationFile	CalibPars10MeVRange.dat
%CalibrationFile         CalibPars11MeVsettings.dat
%CalibrationFile         CalibPars11MeVsettings_corrLaBr.dat
%CalibrationFile         CalibPars11MeVsettings_NewCorrLaBr.dat

%----------------------------------------------------------------------------------------------------------------------
% File for X1 offsets
% Due to (mostly SSC related RF) changes/drifts, the peaks in the focal plane spectrum may change slightly,
% but significantly, from run to run.
% Your job is to determine those changes relative to a zeroth run and put them in the X1offsets file
% in the form:   run number  delta-X
% Now, if no such offsets are to be used, change the file name to 'ignore' and the nr to 0
% Final and important note: the offsets file should terminate with a line reading 'eof'
%----------------------------------------------------------------------------------------------------------------------
%NrOfX1Offsets  0
%XOffsetsFile   ignore
NrOfX1Offsets   40
XOffsetsFile    X1offsets_4WE.dat

%----------------------------------------------------------------------------------------------------------------------
% File for tof offsets
% Due to SSC related RF) changes, the pid may change slightly, but significantly, in time from run to run.
% Your job is to determine those changes relative to a zeroth run and put them in the TOFoffsets file
% in the form:   run number  delta-tof
% Now, if no such offsets are to be used, change the file name to 'ignore' and the nr to 0
% Final and important note: the offsets file should terminate with a line reading 'eof'
%----------------------------------------------------------------------------------------------------------------------
%NrOfTOFOffsets  0
%TOFOffsetsFile  ignore
NrOfTOFOffsets   41
TOFOffsetsFile   TOFoffsets_4WE.dat

%----------------------------------------------------------------------------------------------------------------------
% File for pad offsets
% 
% Your job is to determine those changes relative to a zeroth run and put them in the Padoffsets file
% in the form:   run number  delta-pad
% Now, if no such offsets are to be used, change the file name to 'ignore' and the nr to 0
% Final and important note: the offsets file should terminate with a line reading 'eof'
%----------------------------------------------------------------------------------------------------------------------
%NrOfPadOffsets  0
%PadOffsetsFile  ignore
NrOfPadOffsets   40
PadOffsetsFile   PAD1offsets_4WE.dat

%----------------------------------------------------------------------------------------------------------------------
% File for TDC Offsets - should be of the form: channel offset 
% Now, if the TDC offsets should not be set, change the file name to 'ignore'
% The calibration file should terminate with a line reading 'eof'
% NOTE these offsets are only for the Si channels
%----------------------------------------------------------------------------------------------------------------------
TDCOffsetsFile ignore

% Last line should be ConfigEnd so that the code knows that you are finished - otherwise it will not finish trying to read stuff in.
ConfigEnd
